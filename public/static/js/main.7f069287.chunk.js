(this["webpackJsonpoyameles-front"]=this["webpackJsonpoyameles-front"]||[]).push([[0],{47:function(e,a,t){e.exports=t(76)},73:function(e,a,t){},75:function(e,a,t){},76:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(16),c=t.n(r),s=t(2),u=function(e){var a=e.children;return l.a.createElement("div",{className:"uk-section"},l.a.createElement("div",{className:"uk-container"},a))},o=function(){return l.a.createElement(u,null,"Hola")},i=t(3),m=t(1),d=t(12),E=t(36),p=t(5),b=t(6),h=t(4),v=t.n(h),f="https://oyameles.herokuapp.com/api",g=function(e){return e.reduce((function(e,a){return Object(m.a)({},e,Object(i.a)({},a._id,a))}),{})},O=function(e){return Object.values(e)},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=/[$]/;n.test(e)&&(e=e.replace(a,t));var l=(e=parseFloat(e).toFixed(t)).toString().split(".");l[0].length>=4&&(l[0]=l[0].replace(/(\d)(?=(\d{3})+$)/g,"".concat(a,"1,"))),l[1]&&l[1].length>=5&&(l[1]=l[1].replace(/(\d{3})/g,"".concat(a,"1 ")));var r=l.join(".");return r="".concat(a," ").concat(r)};v.a.defaults.withCredentials=!0;var k="oyameles/user/LOADING",y="oyameles/user/LOGIN_SUCCESS",j="oyameles/user/LOGIN_ERROR",S="oyameles/user/LOGOUT",N={data:JSON.parse(localStorage.getItem("user")),status:"",error:void 0};var C=function(){return{type:k}},R=function(e,a){return function(t){return t(C()),v.a.post("".concat(f,"/users/login"),e).then((function(e){var n=e.data.user;localStorage.setItem("user",JSON.stringify(n)),t({type:y,payload:n}),a("/")})).catch((function(e){return t((a=e.response.data,{type:j,error:a}));var a}))}},T=function(e,a){return function(t){return v.a.post("".concat(f,"/users/logout"),e).then((function(e){var n=e.data.user;localStorage.removeItem("user",JSON.stringify(n)),t({type:S}),a("/login")}))}};function w(){var e=Object(E.a)(['\n  background-image: url("https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Field-pines-mountain.jpg/1200px-Field-pines-mountain.jpg");\n  height: 800px;\n  background-color: #b1debe;\n  background-position: center; /* Center the image */\n  background-repeat: no-repeat; /* Do not repeat the image */\n  background-size: cover; /* Resize the background image to cover the entire container */\n']);return w=function(){return e},e}var D=t(38).a.div(w()),L=function(){var e=Object(s.g)(),a=Object(b.b)(),t=Object(s.f)().push,r=Object(b.c)((function(e){return e.user.status})),c=e.pathname.includes("login"),o=Object(n.useState)({}),E=Object(d.a)(o,2),h=E[0],v=E[1],f=function(e){var a=e.target.name,t=e.target.value;v((function(e){return Object(m.a)({},e,Object(i.a)({},a,t))}))};return l.a.createElement(D,null,l.a.createElement(u,null,l.a.createElement("div",{className:"uk-flex uk-flex-center"},l.a.createElement("div",{className:"uk-width-1-4"},l.a.createElement("h3",null,c?"Login":"Signup"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(R(h,t))},className:"uk-width-1-1 uk-form-stacked uk-flex uk-flex-center uk-flex-column"},l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label",htmlFor:"email"},"Email:"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("span",{className:"uk-form-icon uk-form-icon-flip","uk-icon":"icon: mail"}),l.a.createElement("input",{onChange:f,id:"email",name:"email",className:"uk-input",type:"email",required:!0})),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label",htmlFor:"password"},"Password:"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("span",{className:"uk-form-icon uk-form-icon-flip","uk-icon":"icon: lock"}),l.a.createElement("input",{onChange:f,id:"password",name:"password",className:"uk-input",type:"password",required:!0})))),c?l.a.createElement("div",{className:"uk-text-meta"},"A\xfan no tienes cuenta?"," ",l.a.createElement(p.b,{className:"uk-text-primary",to:"/signup"},"Crear cuenta")):null,l.a.createElement("button",{className:"uk-button uk-button-primary",disabled:"pending"===r},"pending"!==r&&l.a.createElement("span",null,c?"Login":"Signup"),"pending"===r&&l.a.createElement("div",{"uk-spinner":"true"})))))))},A="oyameles/lotes/GET_LOTES_ERROR",U="oyameles/lotes/EDIT_LOTE_ERROR",x={items:{},status:"",error:void 0};var I=function(e){return function(a){a({type:"oyameles/lotes/LOADING"});var t=e?"".concat(f,"/lotes/lotes?_id=").concat(e):"".concat(f,"/lotes/lotes");return v.a.get(t).then((function(e){var t=g(e.data.result);a({type:"oyameles/lotes/GET_LOTES_SUCCESS",payload:t})})).catch((function(e){a({type:A,error:e})}))}},M=function(){var e=Object(b.b)(),a=Object(b.c)((function(e){return e.lotes.items}));return Object(n.useEffect)((function(){e(I())}),[e]),console.log(O(a)),l.a.createElement(u,null,l.a.createElement("div",null,l.a.createElement("table",{className:"uk-table uk-table-middle uk-table-divider"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"uk-width-small"},"Numero"),l.a.createElement("th",null,"Cliente"),l.a.createElement("th",null,"Area(m2)"),l.a.createElement("th",null,"$/m2"),l.a.createElement("th",null,"Precio Total"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Descripcion"))),l.a.createElement("tbody",null,O(a).sort((function(e,a){return e.numero-a.numero})).map((function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,e.numero),l.a.createElement("td",null,e.cliente),l.a.createElement("td",null,e.area),l.a.createElement("td",null,e.precio_m2),l.a.createElement("td",null,e.precio_total),l.a.createElement("td",null,e.status),l.a.createElement("td",null,e.descripcion),l.a.createElement("td",null,l.a.createElement(p.b,{to:"/DetalleLote/".concat(e._id)},l.a.createElement("button",{className:"uk-button uk-button-default",type:"button"},"Detalle"))))}))))))},G=t(45),$="oyameles/ventas/GET_VENTAS_ERROR",P="oyameles/ventas/EDIT_VENTA_SUCCESS",V="oyameles/ventas/EDIT_VENTA_ERROR",F={items:{},status:"",error:void 0};var Y=function(){return function(e){return e({type:"oyameles/ventas/LOADING"}),v.a.get("".concat(f,"/ventas")).then((function(a){var t=g(a.data.result);e({type:"oyameles/ventas/GET_VENTAS_SUCCESS",payload:t})})).catch((function(a){e({type:$,error:a})}))}},J=function(e){var a=e.images;return l.a.createElement("div",{className:"uk-padding-remove uk-position-relative uk-visible-toggle uk-light","uk-slideshow":"animation: push;ratio: 2:2;max-height: 500"},l.a.createElement("ul",{className:"uk-slideshow-items"},void 0!==a?a.map((function(e,a){return l.a.createElement("li",{key:a},l.a.createElement("img",{src:e,alt:"","uk-cover":"true"}))})):""),l.a.createElement("a",{className:"uk-position-center-left uk-position-small uk-hidden-hover",href:"#","uk-slidenav-previous":"true","uk-slideshow-item":"previous"}),l.a.createElement("a",{className:"uk-position-center-right uk-position-small uk-hidden-hover",href:"#","uk-slidenav-next":"true","uk-slideshow-item":"next"}),l.a.createElement("div",{className:"uk-position-bottom-center uk-position-small"},l.a.createElement("ul",{className:"uk-dotnav"},void 0!==a?a.map((function(e,a){return l.a.createElement("li",{key:a,"uk-slideshow-item":a},l.a.createElement("a",{href:"#"},"Item 1"))})):"")))},z=t(46),X=function(e){var a=e.name,t=e.type,n=void 0===t?"text":t,r=e.handleChange,c=e.placeholder,s=e.title,u=e.disabled,o=Object(z.a)(e,["name","type","handleChange","placeholder","title","disabled"]);return l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label uk-text-capitalize",htmlFor:a},s,":"),l.a.createElement("div",{className:"uk-form-controls"},l.a.createElement("input",Object.assign({disabled:u,onChange:r,name:a,className:"uk-input",id:a,type:n,placeholder:c},o))))},q=t(23),B=function(){var e=Object(b.b)(),a=Object(s.h)().id,t=Object(b.c)((function(e){return e.ventas.items})),r=Object(b.c)((function(e){return e.lotes.items[a]}))||{},c=Object(n.useState)({}),o=Object(d.a)(c,2),E=o[0],p=o[1],h=Object(n.useState)([]),v=Object(d.a)(h,2),f=v[0],g=v[1],k=O(t).find((function(e){return e.lote._id===a}))||{},y=function(e){return void 0===k.detalle_credito?"":k.detalle_credito[e]};Object(n.useEffect)((function(){if(e(Y()),e(I(a)),t){var n=N(y("pago_mensual"),y("meses"),y("fecha_inicial"),y("principal"),y("tasa"));p({pago_mesual:y("pago_mensual"),meses:y("meses"),"a\xf1os":y("a\xf1os"),fecha_inicial:y("fecha_inicial"),principal:y("principal"),tasa:y("tasa")}),g(n)}}),[e,a]);var j=function(e){var a=e.target.name,t=e.target.files||e.target.value,n=12*E["a\xf1os"],l=E.tasa/100/12,c=E.principal*l*Math.pow(1+l,E.meses)/(Math.pow(1+l,E.meses)-1),s=E["enganche_%"]/100*r.precio_total,u=r.precio_total-E.enganche_$;p((function(e){var l;return Object(m.a)({},e,(l={},Object(i.a)(l,a,t),Object(i.a)(l,"meses",n),Object(i.a)(l,"pago_mensual",c),Object(i.a)(l,"enganche_$",s),Object(i.a)(l,"principal",u),l))})),console.log(E,l,c)},S=function(e){return void 0===e||e.length<1?"ND":e.join(", ")},N=function(e,a,t,n,l){var r,c=[{periodo:0,fecha:q(t).format("DD/MMMM/YYYY"),saldo_inicial:0,pago_mensual:0,intereses:0,principal:0,saldo_final:Number(n),intereses_acumulados:0}];for(r=0;r<Number(a);r++)c=[].concat(Object(G.a)(c),[{periodo:r+1,fecha:q(c[r].fecha).add(1,"month").format("DD/MMMM/YYYY"),saldo_inicial:c[r].saldo_final,pago_mensual:Number(e),intereses:c[r].saldo_final*(Number(l)/100)/12,principal:Number(e)-c[r].saldo_final*(Number(l)/100)/12,saldo_final:c[r].saldo_final-(Number(e)-c[r].saldo_final*(Number(l)/100)/12),intereses_acumulados:c[r].saldo_final*(Number(l)/10)/12+c[r].intereses_acumulados}]);return c};return console.log(k),l.a.createElement("div",null,l.a.createElement(u,null,l.a.createElement("h3",null,"LOTE ",r.numero),l.a.createElement("div",{className:"uk-grid-match uk-child-width-1-3@m","uk-grid":"true"},l.a.createElement("div",null,l.a.createElement(J,{images:r.images})),l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Fase:")," ",r.fase),l.a.createElement("p",null,l.a.createElement("b",null,"\xc1rea:")," ",r.area," M2"),l.a.createElement("p",null,l.a.createElement("b",null,"Precio por M2:")," ",r.precio_m2),l.a.createElement("p",null,l.a.createElement("b",null,"Precio Total:")," ",r.precio_total),l.a.createElement("p",null,l.a.createElement("b",null,"Status:")," ",r.status)),l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Colindancias:")," ",S(r.colindancias)),l.a.createElement("p",null,l.a.createElement("b",null,"Geometria:")," ",S(r.geometria)),l.a.createElement("p",null,l.a.createElement("b",null,"Topografia:")," ",S(r.topografia)),l.a.createElement("p",null,l.a.createElement("b",null,"Vegetaci\xf3n:")," ",S(r.vegetacion)),l.a.createElement("p",null,l.a.createElement("b",null,"Vista:")," ",S(r.vista))))),l.a.createElement(u,null,l.a.createElement("h3",null,"Detalle de venta del LOTE ",r.numero),l.a.createElement("div",{className:"uk-flex uk-flex-left uk-child-width-1"},l.a.createElement("form",{className:"uk-grid-small","uk-grid":"true",onSubmit:function(e){e.preventDefault();var a=N(E.pago_mensual,E.meses,E.fecha_inicial,E.principal,E.tasa);g(a)}},l.a.createElement(X,{name:"fecha_inicial",title:"Fecha Inicial",placeholder:y("fecha_inicial"),value:E.fecha_inicial||"",handleChange:j}),l.a.createElement(X,{name:"enganche_%",title:"Enganche (%)",placeholder:y("enganche_%"),value:E["enganche_%"]||"",handleChange:j}),l.a.createElement(X,{disabled:!0,name:"enganche_$",title:"Enganche ($MXN)",placeholder:y("enganche_$"),value:E.enganche_$||"",handleChange:j}),l.a.createElement(X,{disabled:!0,name:"principal",title:"Principal",placeholder:y("principal"),value:E.principal?E.principal:"",handleChange:j}),l.a.createElement(X,{name:"tasa",title:"Tasa (%)",placeholder:y("tasa"),value:E.tasa||"",handleChange:j}),l.a.createElement(X,{name:"a\xf1os",title:"A\xf1os",placeholder:y("a\xf1os"),value:E["a\xf1os"]||"",handleChange:j}),l.a.createElement(X,{disabled:!0,name:"meses",title:"Meses",placeholder:y("meses"),value:E.meses||"",handleChange:j}),l.a.createElement(X,{disabled:!0,name:"pago_mensual",title:"Pago Mensual",placeholder:y("pago_mensual"),value:E.pago_mensual||"",handleChange:j}),l.a.createElement(X,{name:"images",title:"Product images",placeholder:"Product images",type:"file",handleChange:j,multiple:!0}),l.a.createElement("button",{className:"uk-button"},"Create")))),l.a.createElement(u,null,l.a.createElement("table",{className:"uk-table uk-table-middle uk-table-divider uk-table-striped table uk-table-small uk-table-responsive"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"uk-width-small"},"Periodo"),l.a.createElement("th",null,"Fecha de Pago"),l.a.createElement("th",null,"Saldo Inicial"),l.a.createElement("th",null,"Pago Mensual"),l.a.createElement("th",null,"Intereses"),l.a.createElement("th",null,"Principal"),l.a.createElement("th",null,"Saldo Final"),l.a.createElement("th",null,"Interesas Acumulados"))),l.a.createElement("tbody",null,f.sort((function(e,a){return e.periodo-a.periodo})).map((function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,e.periodo),l.a.createElement("td",null,e.fecha),l.a.createElement("td",null,_(e.saldo_inicial,"$",1)),l.a.createElement("td",null,_(e.pago_mensual,"$",1)),l.a.createElement("td",null,_(e.intereses,"$",1)),l.a.createElement("td",null,_(e.principal,"$",1)),l.a.createElement("td",null,_(e.saldo_final,"$",1)),l.a.createElement("td",null,_(e.intereses_acumulados,"$",1)),l.a.createElement("td",null))}))))))},W=function(){return l.a.createElement(s.c,null,l.a.createElement(s.a,{exact:!0,path:"/"},l.a.createElement(o,null)),l.a.createElement(s.a,{exact:!0,path:"/login"},l.a.createElement(L,null)),l.a.createElement(s.a,{exact:!0,path:"/signup"},l.a.createElement("h1",null,"signup")),l.a.createElement(s.a,{exact:!0,path:"/lotes"},l.a.createElement(M,null)),l.a.createElement(s.a,{exact:!0,path:"/DetalleLote/:id"},l.a.createElement(B,null)))},H=function(){var e=Object(b.c)((function(e){return e.user.data})),a=Object(b.b)(),t=Object(s.f)().push,r=Object(n.useState)({}),c=Object(d.a)(r,1)[0];return l.a.createElement("nav",{style:{backgroundColor:"#74967e"},className:"uk-navbar-container","uk-navbar":"true"},l.a.createElement("div",{className:"uk-navbar-left"},l.a.createElement("ul",{className:"uk-navbar-nav"},l.a.createElement("li",{className:"uk-active"},l.a.createElement(p.b,{to:"/"},"Oyameles")),l.a.createElement("li",null,l.a.createElement(p.b,{to:"/lotes"},"Lotes")))),l.a.createElement("div",{className:"uk-navbar-right"},l.a.createElement("ul",{className:"uk-navbar-nav"},!e&&l.a.createElement("li",{className:""},l.a.createElement(p.b,{to:"/login"},"Login")),!e&&l.a.createElement("li",null,l.a.createElement(p.b,{to:"/signup"},"Signup")),e&&l.a.createElement("li",null,l.a.createElement(p.b,{to:"/profile"},e.nombre," ",e.apellido),l.a.createElement("div",{className:"uk-navbar-dropdown"},l.a.createElement("ul",{className:"uk-nav uk-navbar-dropdown-nav"},l.a.createElement("li",null,l.a.createElement("button",{onClick:function(e){e.preventDefault(),a(T(c,t))},className:"uk-button uk-button-default"},"Logout"))))))))};t(73);var K=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(H,null),l.a.createElement(W,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=t(13),Z=t(42),ee=Object(Q.c)({lotes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"oyameles/lotes/LOADING":return Object(m.a)({},e,{status:"pending"});case"oyameles/lotes/GET_LOTES_SUCCESS":return Object(m.a)({},e,{status:"success",items:Object(m.a)({},a.payload)});case A:return Object(m.a)({},e,{status:"error",error:a.error});case"oyameles/lotes/CREATE_LOTE_SUCCESS":return Object(m.a)({},e,{status:"success",items:Object(m.a)({},e.items,Object(i.a)({},a.payload._id,a.payload))});case"oyameles/lotes/CREATE_LOTE_ERROR":return Object(m.a)({},e,{status:"error",error:a.error});case"oyameles/lotes/EDIT_LOTE_SUCCESS":return Object(m.a)({},e,{status:"success",items:Object(m.a)({},e.items,Object(i.a)({},a.payload._id,a.payload))});case U:return Object(m.a)({},e,{status:"error",error:a.error});case"oyameles/lotes/DELETE_LOTE_SUCCESS":return Object(m.a)({},e,{status:"success"});case"oyameles/lotes/DELETE_LOTE_ERROR":return Object(m.a)({},e,{status:"error",error:a.error});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case k:return Object(m.a)({},e,{status:"pending"});case y:return{status:"success",data:Object(m.a)({},a.payload)};case j:return{status:"error",error:a.error};case S:return N;case"oyameles/user/GET_USERS_SUCCESS":return Object(m.a)({},e,{status:"success",users:Object(m.a)({},a.payload)});case"oyameles/user/GET_USERS_ERROR":return Object(m.a)({},e,{status:"error",error:a.error});case"oyameles/user/CREATE_USER_SUCCESS":return Object(m.a)({},e,{status:"success",users:Object(m.a)({},e.users,Object(i.a)({},a.payload._id,a.payload))});case"oyameles/user/CREATE_USER_ERROR":return Object(m.a)({},e,{status:"error",error:a.error});case"oyameles/user/EDIT_USER_SUCCESS":return Object(m.a)({},e,{status:"success",users:Object(m.a)({},e.users,Object(i.a)({},a.payload._id,a.payload))});case"oyameles/user/EDIT_USER_ERROR":return Object(m.a)({},e,{status:"error",error:a.error});case"oyameles/user/DELETE_USER_SUCCESS":return Object(m.a)({},e,{status:"success"});case"oyameles/user/DELETE_USER_ERROR":return Object(m.a)({},e,{status:"error",error:a.error});default:return e}},ventas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"oyameles/ventas/LOADING":return Object(m.a)({},e,{status:"pending"});case"oyameles/ventas/GET_VENTAS_SUCCESS":return Object(m.a)({},e,{status:"success",items:Object(m.a)({},a.payload)});case $:return Object(m.a)({},e,{status:"error",error:a.error});case"oyameles/ventas/CREATE_VENTA_SUCCESS":return Object(m.a)({},e,{status:"success",items:Object(m.a)({},e.items,Object(i.a)({},a.payload._id,a.payload))});case"oyameles/ventas/CREATE_VENTA_ERROR":return Object(m.a)({},e,{status:"error",error:a.error});case P:return Object(m.a)({},e,{status:"success",items:Object(m.a)({},e.items,Object(i.a)({},a.payload._id,a.payload))});case V:return Object(m.a)({},e,{status:"error",error:a.error});case"oyameles/ventas/DELETE_VENTA_SUCCESS":return Object(m.a)({},e,{status:"success"});case"oyameles/ventas/DELETE_VENTA_ERROR":return Object(m.a)({},e,{status:"error",error:a.error});default:return e}}}),ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Q.d,te=Object(Q.e)(ee,ae(Object(Q.a)(Z.a))),ne=t(43),le=t.n(ne),re=t(44),ce=t.n(re);t(74),t(75);le.a.use(ce.a),c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(b.a,{store:te},l.a.createElement(p.a,null,l.a.createElement(K,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.7f069287.chunk.js.map